@using İkinciElKitap.Models
@model List<Kategori>
@{
    ViewBag.Title = "Index";
}

<h2>Kategori Detayları</h2>
<div>

    <a class="btn btn-success rounded-2" href="/AdminKategori/Ekle">Kategori Ekle</a>

</div>
<div>
    <table class="table table-hover">
        <tr>
            <th>Kategori ID</th>
            <th>Kategori Adı</th>
            <th>Sil</th>
            <th>Güncelle</th>

        </tr>
        <tbody>
            @foreach (Kategori kt in Model)
            {
                <tr>
                    <td> @kt.KategoriID</td>
                    <td> @kt.KategoriAd</td>
                    <td> <a class="btn btn-danger ktSil" data-ktId="@kt.KategoriID" href="#">Sil</a> </td>
                    <td> <a href="@Url.Action("Ekle", "AdminKategori", new { id = kt.KategoriID })" class="btn btn-info">Güncelle</a> </td>

                </tr>
            }

        </tbody>
    </table>

</div>

@section scripts{
    <script src="~/Shared/js/jquery-1.11.1 (1).js"></script>

    <script>
        $(".ktSil").click(
            function () {

                var sonuc = confirm("Kayıt Silinsin Mi?")
                if (sonuc) {
                    var ktId = $(this).attr("data-ktId")
                    //alert("ID=" + ktId);
                    $.ajax(
                        {

                            type: "POST",
                            url: "/AdminKategori/Sil/" + ktId,
                            success: function () {
                                alert("Kayıt silindi");
                                window.Location.replace("/AdminKategori/Index");

                            },


                            error: function () {
                                alert("Hata oluştu");
                            }
                        }

                    );

                }
                else {
                    alert("işlem ipal edildi");

                }
            }



        );

    </script>
}

@*btn btn-danger ktSil btn btn-info ktGüncelle*@